import{a0 as v,M as k,a6 as B,a7 as y,a as e,U as N,a8 as T,d as x,r as I,o as P,c as S,b as f,a9 as a,w as l,i as m,l as O,n as A,_ as D}from"./index-kUOXs0hd.js";let d;const V={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let R=v({},V);function U(){({instance:d}=B({setup(){const{state:t,toggle:c}=y();return()=>e(T,N(t,{"onUpdate:show":c}),null)}}))}function $(s){return k?new Promise((t,c)=>{d||U(),d.open(v({},R,s,{callback:u=>{(u==="confirm"?t:c)(u)}}))}):Promise.resolve(void 0)}const _=s=>$(v({showCancelButton:!0},s)),E="18801058117",j={customerServicePhone:E},L={class:"profile-page"},M={class:"content"},W={style:{margin:"20px"}},z=x({__name:"ProfileView",setup(s){const t=I({id:0,name:"张三",phone:"13800138000",wechatId:"",balance:0,messageNotificationRemainingNum:0,phoneNotificationRemainingNum:0,createdAt:"",updatedAt:""}),c=async()=>{try{const r=localStorage.getItem("authToken");if(!r){console.error("未找到认证token");return}const i=await(await fetch("http://121.40.120.244/stickman/user/userInfo",{method:"GET",headers:{Authorization:r,"Content-Type":"application/json"}})).json();i.code===200?t.value=i.data:console.error("获取用户信息失败:",i.message)}catch(r){console.error("获取用户信息时发生错误:",r)}};P(()=>{c()});const u=()=>{localStorage.removeItem("authToken"),window.location.reload()},g=async()=>{try{await _({title:"修改昵称",message:`当前昵称：${t.value.name}`,confirmButtonText:"确认",cancelButtonText:"取消"}),O("昵称修改功能已触发")}catch{}},h=()=>{_({title:"联系我们",message:`客服联系电话：${j.customerServicePhone}`,confirmButtonText:"确定",showCancelButton:!1})};return(r,o)=>{const i=a("van-nav-bar"),n=a("van-cell"),w=a("van-cell-group"),b=a("van-button"),p=a("van-tabbar-item"),C=a("van-tabbar");return A(),S("div",L,[e(i,{title:"我的资料"}),f("div",M,[e(w,null,{default:l(()=>[e(n,{title:"昵称",value:t.value.name,"is-link":"",onClick:g},null,8,["value"]),e(n,{title:"手机号",value:t.value.phone},null,8,["value"]),e(n,{title:"微信号",value:t.value.wechatId||"未设置"},null,8,["value"]),e(n,{title:"账户余额",value:`¥${t.value.balance}`},null,8,["value"]),e(n,{title:"短信通知剩余次数",value:t.value.messageNotificationRemainingNum},null,8,["value"]),e(n,{title:"电话通知剩余次数",value:t.value.phoneNotificationRemainingNum},null,8,["value"]),e(n,{title:"联系我们","is-link":"",onClick:h})]),_:1}),f("div",W,[e(b,{type:"danger",block:"",onClick:u},{default:l(()=>o[0]||(o[0]=[m("退出登录",-1)])),_:1,__:[0]})])]),e(C,{route:""},{default:l(()=>[e(p,{replace:"",to:"/device",icon:"apps-o"},{default:l(()=>o[1]||(o[1]=[m("设备",-1)])),_:1,__:[1]}),e(p,{replace:"",to:"/contacts",icon:"contact-o"},{default:l(()=>o[2]||(o[2]=[m("通知人",-1)])),_:1,__:[2]}),e(p,{replace:"",to:"/profile",icon:"user-o"},{default:l(()=>o[3]||(o[3]=[m("我的",-1)])),_:1,__:[3]})]),_:1})])}}}),G=D(z,[["__scopeId","data-v-5a8b19dd"]]);export{G as default};
